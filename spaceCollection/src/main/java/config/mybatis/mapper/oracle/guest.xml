<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sc.spaceCollection.guest.model.GuestDAO">

	<insert id="insertGuest" parameterType="guestVo">
		<selectKey keyProperty="userNum" order="BEFORE" resultType="int">
			select USER_INFO_SEQ.nextval from dual
		</selectKey>
		insert into USER_INFO(USER_NUM, USER_NAME, USER_HP, USER_ID, USER_PWD, USER_EMAIL, ZIPCODE
    		, ADDRESS, ADDRESS_DETAIL, SALT)
		values(#{userNum},#{userName}, #{userHp}, #{userId}, #{userPwd}, #{userEmail}, #{zipcode}
			, #{address}, #{addressDetail}, #{salt})
	</insert>

	<select id="guestCheckId" parameterType="string"
		resultType="int">
		select count(*) from USER_INFO
		where USER_ID=#{userId}
		and USER_OUT_DATE is null
	</select>
	
	<select id="selectPwd" parameterType="string"
		resultType="string">
		select USER_PWD from USER_INFO
		where USER_ID=#{userId}
		and USER_OUT_DATE is null
	</select>
	
	<select id="selectUserSalt" parameterType="String" resultType="String">
		select SALT from USER_INFO
		WHERE USER_ID=#{userId}
		and USER_OUT_DATE is null
	</select>

	<select id="selectUserInfo" parameterType="string"
		resultType="guestVo">
		select * from USER_INFO
		where USER_ID=#{userId}
	</select>
	
	<select id="selectCountEmail" parameterType="string" resultType="int">
		select count(*) from USER_INFO
		where USER_EMAIL=#{userEmail}
	</select>
	
</mapper>
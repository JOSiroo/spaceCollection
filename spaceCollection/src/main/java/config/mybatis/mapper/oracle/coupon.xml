<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sc.spaceCollection.coupon.model.CouponDAO">

	<insert id="insertCoupon" parameterType="couponVo">
		<selectKey keyProperty="couponNum" order="BEFORE" resultType="int">
			select coupon_seq.nextval from dual
		</selectKey>
		INSERT INTO COUPON (COUPON_NUM, COUPON_NAME, USER_NUM, COUPON_TYPE)
		VALUES (#{couponNum}, #{couponName}, #{userNum}, #{couonType})
	</insert>
	
	<select id="countCoupon" parameterType="int" resultType="int">
		select count(*) from coupon where user_num = #{userNum} and COUPON_DEL_FLAG is null
	</select>
	
	<select id="selectUserCoupon" parameterType="int" resultType="couponVO">
		select COUPON_NAME, COUPON_TYPE, COUPON_START_DAY, COUPON_FINISH_DAY 
		from coupon where user_num = #{userNum} and COUPON_DEL_FLAG is null
	</select>

</mapper>
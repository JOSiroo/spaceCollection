create or replace view BOARD_BOARDTYPE_USER_VIEW
as
select bt."BOARD_TYPE_ID",bt."BOARD_TYPE_NAME",bt."BOARD_TYPE_COMMENT_OK",bt."BOARD_TYPE_FILE_OK",bt."BOARD_TYPE_FILE_NUM",bt."BOARD_TYPE_FILE_SIZE",bt."BOARD_TYPE_USE",bt."BOARD_TYPE_REGDATE", b.BOARD_NUM, b.BOARD_TITLE, b.BOARD_REG_DATE, b.BOARD_DEL_FLAG,
u.USER_NUM, u.USER_ID, nvl(c.commentCount, 0) as commentCount, nvl(sf.fileCount, 0) as fileCount
from board b join board_type bt 
on b.board_type_id = bt.board_type_id 
join user_info u 
on b.user_num = u.user_num
left outer join (select board_num, count(*) as commentCount from comments where COMMENT_DEL_FLAG is null group by board_num)c
on b.board_num = c.board_num
left outer join (select img_foreign_key, count(*) as fileCount from space_file group by img_foreign_key)sf
on b.board_num = sf.img_foreign_key
order by board_reg_date desc;



create or replace view board_view
as
select b.*, u.user_name, u.user_id, bt.board_type_name, bt.BOARD_TYPE_COMMENT_OK, bt.BOARD_TYPE_FILE_OK,
bt.BOARD_TYPE_FILE_NUM, bt.BOARD_TYPE_FILE_SIZE from board b 
join user_info u on b.user_num = u.user_num
join board_type bt on b.board_type_id = bt.board_type_id;



create or replace view comments_view
as
select c.*, u.user_id from comments c 
join user_info u on c.user_num=u.user_num;



create or replace view REVIEW_USERID
as
select r."REVIEW_NUM",r."REVIEW_RATE",r."REVIEW_CONTENT",r."REVIEW_DEL_FLAG",r."REVIEW_REG_DATE",r."REVIEW_OUT_DATE",r."USER_NUM",r."RESERVATION_NUM", u.user_id, s.space_name,
re. RESERVER_PAY_DAY
from review r 
join user_info u on r.user_num = u.user_num
join reservation re on r.reservation_num = re.reservation_num
left join space_detail sd on re.sd_num = sd.sd_num
left join space s on sd.space_num = s.space_num;



create or replace view COMMENTS_BOARD_VIEW
as
select c."COMMENT_NUM",c."COMMENT_CONTENT",c."COMMENT_REG_DATE",c."COMMENT_DEL_FLAG",c."COMMENT_OUT_DATE",c."BOARD_NUM",c."USER_NUM", u.user_id , b.board_title
from comments c 
join user_info u on c.user_num=u.user_num
join board b on c.board_num = b.board_num;


create or replace view SPACE_LIST_VIEW
as
select s.*, st.space_type_name, u.user_id
from space s join space_type st
on s.space_type_no = st.space_type_no
join user_info u
on u.user_num = s.user_num;

<<<<<<< HEAD
create table calendar_memo
(
    memo_num        number primary key,
    memo_title      varchar2(50) not null,
    memo_content    varchar2(200) not null,
    memo_start_day  timestamp not null,
    memo_end_day    timestamp,
    user_num        number,
    foreign key (user_num) references user_info(user_num)
)
create sequence calendar_memo_seq
increment by 1
start with 1
nocache
=======
create or replace view spaceType_category_view
as
select s.*, st.category_name
from space_type s join space_type_category st
on s.CATEGORY_NO = st.CATEGORY_NO;
>>>>>>> branch 'main' of https://github.com/JOSiroo/spaceCollection
